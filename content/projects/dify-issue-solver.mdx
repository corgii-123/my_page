---
title: Online Issue Solver (Dify Workflow)
date: 2024-10
tags: [Dify, n8n, OpenAI, Workflow]
cover: /assets/solver-cover.png
summary: å·¥å•æ™ºèƒ½åˆ†å‘ + API è°ƒåº¦ï¼Œå…¨é“¾è·¯é—­ç¯
bullets:
  - å³°å€¼å¤„ç† 200+/dayï¼ŒSLA < 3 s
  - è‡ªåŠ¨é—®é¢˜åˆ†ç±»å’Œè§£å†³æ–¹æ¡ˆåŒ¹é…
  - é›†æˆä¼ä¸šå†…éƒ¨ API å’Œè„šæœ¬ç³»ç»Ÿ
---

## é¡¹ç›®èƒŒæ™¯

éšç€å…¬å¸ä¸šåŠ¡å¿«é€Ÿå‘å±•ï¼Œçº¿ä¸Šé—®é¢˜å’Œç”¨æˆ·å·¥å•æ•°é‡æ¿€å¢ï¼Œä¼ ç»Ÿçš„äººå·¥å¤„ç†æ–¹å¼å·²æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚ä¸ºäº†å®ç°é—®é¢˜çš„è‡ªåŠ¨åŒ–å¤„ç†å’Œå¿«é€Ÿå“åº”ï¼Œæˆ‘è®¾è®¡å¹¶å®ç°äº†åŸºäº Dify å·¥ä½œæµçš„æ™ºèƒ½é—®é¢˜è§£å†³ç³»ç»Ÿã€‚

## æ ¸å¿ƒæ¶æ„

### æŠ€æœ¯æ ˆ
- **å·¥ä½œæµå¼•æ“**: Dify Workflow + Custom Nodes
- **è‡ªåŠ¨åŒ–**: n8n + è‡ªå®šä¹‰è¿æ¥å™¨
- **AI æ¨¡å‹**: OpenAI GPT-4 + ä¸šåŠ¡å¾®è°ƒæ¨¡å‹
- **æ¶ˆæ¯é€šä¿¡**: ä¼ä¸š IM é›†æˆï¼ˆé’‰é’‰/é£ä¹¦/å¾®ä¿¡ï¼‰
- **API é›†æˆ**: å†…éƒ¨è¿ç»´ API + ç›‘æ§ç³»ç»Ÿ

### ç³»ç»Ÿæ¶æ„
```mermaid
graph TB
    A[ç”¨æˆ·æŠ¥å‘Šé—®é¢˜] --> B[Dify å·¥ä½œæµå¼•æ“]
    B --> C[é—®é¢˜åˆ†ç±»å™¨]
    C --> D[è¿ç»´é—®é¢˜]
    C --> E[ä¸šåŠ¡é—®é¢˜]
    C --> F[æƒé™é—®é¢˜]
    
    D --> G[è°ƒç”¨è¿ç»´ API]
    E --> H[æŸ¥è¯¢ä¸šåŠ¡æ–‡æ¡£]
    F --> I[æƒé™ç®¡ç†ç³»ç»Ÿ]
    
    G --> J[è‡ªåŠ¨ä¿®å¤]
    H --> K[è§£å†³æ–¹æ¡ˆç”Ÿæˆ]
    I --> L[æƒé™è°ƒæ•´]
    
    J --> M[ç»“æœåé¦ˆ]
    K --> M
    L --> M
    
    M --> N[é—®é¢˜é—­ç¯]
    M --> O[è´¨é‡è¯„ä¼°]
```

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ æ™ºèƒ½é—®é¢˜åˆ†ç±»
åŸºäº NLP å’Œæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè‡ªåŠ¨è¯†åˆ«é—®é¢˜ç±»å‹ï¼š
- **è¿ç»´ç±»**: æœåŠ¡é‡å¯ã€èµ„æºæ‰©å®¹ã€é…ç½®æ›´æ–°
- **ä¸šåŠ¡ç±»**: æ•°æ®æŸ¥è¯¢ã€æµç¨‹é—®é¢˜ã€åŠŸèƒ½å¼‚å¸¸
- **æƒé™ç±»**: è´¦å·ç®¡ç†ã€æƒé™ç”³è¯·ã€è®¿é—®æ§åˆ¶

### ğŸ”§ è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ
```python
# Dify å·¥ä½œæµæ ¸å¿ƒé€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰
class IssueResolver:
    def process_issue(self, issue_description):
        # 1. é—®é¢˜ç†è§£å’Œåˆ†ç±»
        category = self.classify_issue(issue_description)
        
        # 2. è§£å†³æ–¹æ¡ˆåŒ¹é…
        if category == "ops":
            return self.handle_ops_issue(issue_description)
        elif category == "business":
            return self.handle_business_issue(issue_description)
        elif category == "permission":
            return self.handle_permission_issue(issue_description)
    
    def handle_ops_issue(self, description):
        # è§£æå…·ä½“æ“ä½œéœ€æ±‚
        action = self.extract_action(description)
        
        # è°ƒç”¨å¯¹åº”çš„è¿ç»´ API
        if action == "restart_service":
            result = self.ops_api.restart_service(service_name)
        elif action == "scale_resource":
            result = self.ops_api.scale_resource(resource_config)
        
        return self.format_response(result)
```

### ğŸš€ API ç¼–æ’ç³»ç»Ÿ
- **æœåŠ¡é‡å¯**: è‡ªåŠ¨è¯†åˆ«æœåŠ¡åç§°å¹¶æ‰§è¡Œé‡å¯
- **èµ„æºæ‰©å®¹**: æ ¹æ®è´Ÿè½½æƒ…å†µè‡ªåŠ¨è°ƒæ•´èµ„æºé…ç½®
- **æ•°æ®æŸ¥è¯¢**: è¿æ¥å¤šä¸ªæ•°æ®æºè¿›è¡ŒæŸ¥è¯¢å’Œåˆ†æ
- **æƒé™ç®¡ç†**: è‡ªåŠ¨å¤„ç†å¸¸è§çš„æƒé™ç”³è¯·å’Œåˆ†é…

### ğŸ“Š å®æ—¶ç›‘æ§ä¸åé¦ˆ
- **å¤„ç†çŠ¶æ€è·Ÿè¸ª**: å®æ—¶ç›‘æ§æ¯ä¸ªå·¥å•çš„å¤„ç†è¿›åº¦
- **è´¨é‡è¯„ä¼°**: è‡ªåŠ¨è¯„ä¼°è§£å†³æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§
- **å­¦ä¹ ä¼˜åŒ–**: åŸºäºåé¦ˆæŒç»­ä¼˜åŒ–å·¥ä½œæµ

## æŠ€æœ¯äº®ç‚¹

### Dify å·¥ä½œæµè®¾è®¡
- **æ¨¡å—åŒ–èŠ‚ç‚¹**: å°†å¤æ‚é€»è¾‘æ‹†åˆ†ä¸ºå¯å¤ç”¨çš„èŠ‚ç‚¹
- **æ¡ä»¶åˆ†æ”¯**: åŸºäºé—®é¢˜ç±»å‹å’Œå¤æ‚åº¦çš„æ™ºèƒ½è·¯ç”±
- **å¼‚å¸¸å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶
- **å¹¶è¡Œå¤„ç†**: æ”¯æŒå¤šä¸ªå­ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ

### n8n è‡ªåŠ¨åŒ–é›†æˆ
```json
{
  "workflow": {
    "name": "Issue Auto Handler",
    "nodes": [
      {
        "name": "Webhook Trigger",
        "type": "webhook",
        "config": {
          "path": "/issue/webhook",
          "method": "POST"
        }
      },
      {
        "name": "Dify Workflow",
        "type": "dify",
        "config": {
          "workflow_id": "issue_resolver",
          "input_mapping": {
            "issue_text": "{{$json.description}}",
            "user_id": "{{$json.user_id}}"
          }
        }
      },
      {
        "name": "IM Notification",
        "type": "dingtalk",
        "config": {
          "message": "é—®é¢˜å·²å¤„ç†ï¼š{{$json.solution}}"
        }
      }
    ]
  }
}
```

### çŸ¥è¯†åº“é›†æˆ
- **å†å²æ¡ˆä¾‹**: ä»çŸ¥è¯†åº“ä¸­åŒ¹é…ç›¸ä¼¼çš„å†å²é—®é¢˜
- **è§£å†³æ–¹æ¡ˆåº“**: ç»´æŠ¤æ ‡å‡†åŒ–çš„è§£å†³æ–¹æ¡ˆæ¨¡æ¿
- **æœ€ä½³å®è·µ**: ç»“åˆå›¢é˜Ÿç»éªŒçš„è‡ªåŠ¨åŒ–å»ºè®®

## ä¸šåŠ¡ä»·å€¼

### ğŸ“ˆ æ•ˆç‡æå‡
- **å¤„ç†é€Ÿåº¦**: å¹³å‡å“åº”æ—¶é—´ä» 30 åˆ†é’Ÿé™è‡³ 3 åˆ†é’Ÿ
- **å¤„ç†å®¹é‡**: æ—¥å‡å¤„ç† 200+ å·¥å•ï¼Œå³°å€¼å¤„ç†èƒ½åŠ›æ˜¾è‘—æå‡
- **äººåŠ›é‡Šæ”¾**: é‡Šæ”¾ 60% çš„é‡å¤æ€§å·¥ä½œï¼Œå·¥ç¨‹å¸ˆä¸“æ³¨æ ¸å¿ƒé—®é¢˜

### ğŸ¯ æœåŠ¡è´¨é‡
- **24/7 å¯ç”¨**: å…¨å¤©å€™è‡ªåŠ¨å¤„ç†ï¼Œæ— äººå·¥å¹²é¢„
- **ä¸€è‡´æ€§**: æ ‡å‡†åŒ–çš„å¤„ç†æµç¨‹ï¼Œå‡å°‘äººä¸ºé”™è¯¯
- **å¯è¿½è¸ª**: å®Œæ•´çš„å¤„ç†æ—¥å¿—å’Œå®¡è®¡è·Ÿè¸ª

### ğŸ’° æˆæœ¬èŠ‚çº¦
- **äººåŠ›æˆæœ¬**: å‡å°‘ 40% çš„è¿ç»´äººåŠ›æŠ•å…¥
- **å“åº”æ—¶é—´**: æ˜¾è‘—æå‡ç”¨æˆ·æ»¡æ„åº¦
- **ç³»ç»Ÿç¨³å®šæ€§**: å¿«é€Ÿå“åº”å‡å°‘äº†é—®é¢˜çš„çº§è”å½±å“

## å®é™…åº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹ 1ï¼šæœåŠ¡è‡ªåŠ¨é‡å¯
**é—®é¢˜**: "ç”Ÿäº§ç¯å¢ƒ user-service å“åº”ç¼“æ…¢"
**å¤„ç†æµç¨‹**:
1. è¯†åˆ«ä¸ºè¿ç»´é—®é¢˜
2. æ£€æŸ¥æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—
3. è‡ªåŠ¨æ‰§è¡ŒæœåŠ¡é‡å¯
4. éªŒè¯æœåŠ¡æ¢å¤æ­£å¸¸
5. é€šçŸ¥ç›¸å…³äººå‘˜

**ç»“æœ**: 3 åˆ†é’Ÿå†…å®Œæˆå¤„ç†ï¼ŒæœåŠ¡æ¢å¤æ­£å¸¸

### æ¡ˆä¾‹ 2ï¼šæ•°æ®æŸ¥è¯¢è‡ªåŠ¨åŒ–
**é—®é¢˜**: "æŸ¥è¯¢ç”¨æˆ· ID 12345 çš„è®¢å•çŠ¶æ€"
**å¤„ç†æµç¨‹**:
1. è¯†åˆ«ä¸ºä¸šåŠ¡æŸ¥è¯¢
2. è°ƒç”¨è®¢å•æŸ¥è¯¢ API
3. æ ¼å¼åŒ–æŸ¥è¯¢ç»“æœ
4. è¿”å›ç”¨æˆ·å‹å¥½çš„ç­”æ¡ˆ

**ç»“æœ**: ç§’çº§å“åº”ï¼Œå‡†ç¡®è¿”å›æŸ¥è¯¢ç»“æœ

### æ¡ˆä¾‹ 3ï¼šæƒé™æ‰¹é‡å¤„ç†
**é—®é¢˜**: "æ–°å‘˜å·¥éœ€è¦å¼€é€š CRM ç³»ç»Ÿæƒé™"
**å¤„ç†æµç¨‹**:
1. è¯†åˆ«ä¸ºæƒé™ç”³è¯·
2. éªŒè¯ç”³è¯·äººèº«ä»½
3. è‡ªåŠ¨åˆ†é…æ ‡å‡†æƒé™
4. å‘é€æƒé™å¼€é€šé€šçŸ¥

**ç»“æœ**: è‡ªåŠ¨åŒ–å¤„ç†ï¼Œæ— éœ€äººå·¥å¹²é¢„

## æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³

### é—®é¢˜ç†è§£å‡†ç¡®æ€§
- **æŒ‘æˆ˜**: è‡ªç„¶è¯­è¨€æè¿°çš„é—®é¢˜å¯èƒ½æ¨¡ç³Šæˆ–ä¸å‡†ç¡®
- **è§£å†³**: ç»“åˆä¸Šä¸‹æ–‡å’Œå†å²æ•°æ®è¿›è¡Œè¯­ä¹‰ç†è§£
- **æ•ˆæœ**: é—®é¢˜åˆ†ç±»å‡†ç¡®ç‡è¾¾åˆ° 92%

### API è°ƒç”¨å®‰å…¨æ€§
- **é£é™©**: è‡ªåŠ¨åŒ–ç³»ç»Ÿå¯èƒ½æ‰§è¡Œå±é™©æ“ä½œ
- **æªæ–½**: å¤šå±‚æƒé™éªŒè¯ + æ“ä½œå®¡è®¡ + å›æ»šæœºåˆ¶
- **ä¿éšœ**: å»ºç«‹å®Œå–„çš„å®‰å…¨é˜²æŠ¤ä½“ç³»

### ç³»ç»Ÿé›†æˆå¤æ‚æ€§
- **éš¾ç‚¹**: éœ€è¦é›†æˆå¤šä¸ªå†…éƒ¨ç³»ç»Ÿå’Œ API
- **æ–¹æ¡ˆ**: ç»Ÿä¸€çš„ API Gateway + æ ‡å‡†åŒ–æ¥å£
- **ç®€åŒ–**: é€šè¿‡é€‚é…å™¨æ¨¡å¼å±è”½ç³»ç»Ÿå·®å¼‚

## ç›‘æ§ä¸ä¼˜åŒ–

### æ€§èƒ½æŒ‡æ ‡
- **å¤„ç†æ—¶é•¿**: 95% çš„å·¥å•åœ¨ 5 åˆ†é’Ÿå†…å¤„ç†å®Œæˆ
- **æˆåŠŸç‡**: 87% çš„é—®é¢˜èƒ½å¤Ÿè‡ªåŠ¨è§£å†³
- **ç”¨æˆ·æ»¡æ„åº¦**: 4.6/5.0 åˆ†

### æŒç»­ä¼˜åŒ–
- **åé¦ˆå¾ªç¯**: ç”¨æˆ·è¯„ä»·åé¦ˆä¼˜åŒ–å·¥ä½œæµ
- **æ¨¡å¼å­¦ä¹ **: è¯†åˆ«æ–°çš„é—®é¢˜æ¨¡å¼å¹¶è‡ªåŠ¨åŒ–
- **æ€§èƒ½è°ƒä¼˜**: æŒç»­ä¼˜åŒ– API è°ƒç”¨å’Œå¤„ç†é€»è¾‘

## æœªæ¥è§„åˆ’

- **å¤šæ¨¡æ€æ”¯æŒ**: æ”¯æŒå›¾ç‰‡ã€è¯­éŸ³ç­‰å¤šç§è¾“å…¥æ–¹å¼
- **é¢„æµ‹æ€§ç»´æŠ¤**: åŸºäºå†å²æ•°æ®é¢„æµ‹æ½œåœ¨é—®é¢˜
- **æ™ºèƒ½å‡çº§**: è‡ªåŠ¨å­¦ä¹ æ–°çš„è§£å†³æ–¹æ¡ˆ
- **è·¨å¹³å°é›†æˆ**: æ‰©å±•åˆ°æ›´å¤šä¼ä¸šç³»ç»Ÿå’Œå·¥å…·

---

> ğŸ”¥ è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº† AI å·¥ä½œæµåœ¨ä¼ä¸šè¿ç»´ä¸­çš„å¼ºå¤§æ½œåŠ›ï¼Œé€šè¿‡æ™ºèƒ½åŒ–çš„é—®é¢˜å¤„ç†ï¼Œå¤§å¹…æå‡äº†è¿ç»´æ•ˆç‡å’ŒæœåŠ¡è´¨é‡ã€‚ 

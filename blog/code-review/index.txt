3:I[42856,[],""]
5:I[67000,[],""]
6:I[75326,["8371","static/chunks/eb9a1ad1-e355142169896897.js","5326","static/chunks/5326-ac5dceec6c75ae26.js","7473","static/chunks/7473-94691a425c8c77e8.js","6924","static/chunks/6924-2c2e159cc29f0549.js","308","static/chunks/app/blog/%5Bslug%5D/page-4c4f04b3023ccd8b.js"],""]
7:I[39038,["8371","static/chunks/eb9a1ad1-e355142169896897.js","5326","static/chunks/5326-ac5dceec6c75ae26.js","7473","static/chunks/7473-94691a425c8c77e8.js","6924","static/chunks/6924-2c2e159cc29f0549.js","308","static/chunks/app/blog/%5Bslug%5D/page-4c4f04b3023ccd8b.js"],"Separator"]
4:["slug","code-review","d"]
0:["Z02FsDn5Ou622Ol-Ewaii",[[["",{"children":["blog",{"children":[["slug","code-review","d"],{"children":["__PAGE__?{\"slug\":\"code-review\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","code-review","d"],{"children":["__PAGE__",{},[["$L1","$L2",null],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/my_page/_next/static/css/1946c5917ea477bd.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"zh-CN","suppressHydrationWarning":true,"children":["$","body",null,{"className":"min-h-screen bg-background font-sans antialiased --font-inter","children":["$","div",null,{"className":"flex min-h-screen flex-col","children":[["$","header",null,{"className":"glass sticky top-0 z-50 w-full border-b border-border/50 backdrop-blur-xl","children":["$","div",null,{"className":"container mx-auto flex h-16 items-center justify-between px-4","children":[["$","$L6",null,{"href":"/","className":"group flex items-center space-x-3","children":[["$","div",null,{"className":"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl","children":["$","span",null,{"className":"text-lg font-bold text-white","children":"石"}]}],["$","span",null,{"className":"bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-xl font-bold text-transparent","children":"石杰洋"}]]}],["$","nav",null,{"className":"hidden items-center space-x-8 md:flex","children":[["$","$L6",null,{"href":"/","className":"group relative text-sm font-medium transition-all duration-300 hover:text-purple-600 dark:hover:text-purple-400","children":[["$","span",null,{"className":"relative z-10","children":"首页"}],["$","div",null,{"className":"absolute -bottom-1 left-0 h-0.5 w-0 bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300 group-hover:w-full"}]]}],["$","$L6",null,{"href":"/projects","className":"group relative text-sm font-medium transition-all duration-300 hover:text-purple-600 dark:hover:text-purple-400","children":[["$","span",null,{"className":"relative z-10","children":"项目作品"}],["$","div",null,{"className":"absolute -bottom-1 left-0 h-0.5 w-0 bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300 group-hover:w-full"}]]}],["$","$L6",null,{"href":"/blog","className":"group relative text-sm font-medium transition-all duration-300 hover:text-purple-600 dark:hover:text-purple-400","children":[["$","span",null,{"className":"relative z-10","children":"博客"}],["$","div",null,{"className":"absolute -bottom-1 left-0 h-0.5 w-0 bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300 group-hover:w-full"}]]}],["$","$L6",null,{"href":"/about","className":"group relative text-sm font-medium transition-all duration-300 hover:text-purple-600 dark:hover:text-purple-400","children":[["$","span",null,{"className":"relative z-10","children":"关于我"}],["$","div",null,{"className":"absolute -bottom-1 left-0 h-0.5 w-0 bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300 group-hover:w-full"}]]}],["$","$L6",null,{"href":"/resume","className":"group relative text-sm font-medium transition-all duration-300 hover:text-purple-600 dark:hover:text-purple-400","children":[["$","span",null,{"className":"relative z-10","children":"简历"}],["$","div",null,{"className":"absolute -bottom-1 left-0 h-0.5 w-0 bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300 group-hover:w-full"}]]}]]}],["$","div",null,{"className":"flex items-center space-x-3","children":[["$","$L6",null,{"href":"https://github.com/corgii-123","target":"_blank","rel":"noopener noreferrer","className":"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border bg-background shadow-sm hover:text-accent-foreground h-8 rounded-md px-3 text-xs btn-hover border-purple-200 transition-all duration-300 hover:border-purple-500 hover:bg-purple-50 dark:border-purple-800 dark:hover:border-purple-400 dark:hover:bg-purple-950/50 flex items-center space-x-2","children":[["$","svg",null,{"className":"h-4 w-4","fill":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"fillRule":"evenodd","d":"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clipRule":"evenodd"}]}],["$","span",null,{"children":"GitHub"}]]}],["$","$L6",null,{"href":"mailto:corgii123mail@gmail.com","className":"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary hover:bg-primary/90 h-8 rounded-md px-3 text-xs btn-hover gradient-primary glow text-white shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl flex items-center space-x-2","children":[["$","svg",null,{"className":"h-4 w-4","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}]}],["$","span",null,{"children":"联系我"}]]}]]}],["$","div",null,{"className":"md:hidden","children":["$","button",null,{"className":"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-8 rounded-md text-xs p-2","children":["$","svg",null,{"className":"h-5 w-5","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M4 6h16M4 12h16M4 18h16"}]}]}]}]]}]}],["$","main",null,{"className":"flex-1","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}],["$","footer",null,{"className":"border-t bg-background","children":["$","div",null,{"className":"container mx-auto px-4 py-12","children":[["$","div",null,{"className":"grid grid-cols-1 gap-8 md:grid-cols-4","children":[["$","div",null,{"className":"space-y-3","children":[["$","h3",null,{"className":"text-lg font-semibold","children":"石杰洋"}],["$","p",null,{"className":"text-sm text-muted-foreground","children":"AI-First Front-End Developer"}],["$","p",null,{"className":"text-sm text-muted-foreground","children":"专注知识库 / DevEx"}]]}],["$","div",null,{"className":"space-y-3","children":[["$","h4",null,{"className":"text-sm font-semibold","children":"导航"}],["$","div",null,{"className":"space-y-2","children":[["$","$L6",null,{"href":"/","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"首页"}],["$","$L6",null,{"href":"/projects","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"项目作品"}],["$","$L6",null,{"href":"/blog","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"博客"}],["$","$L6",null,{"href":"/about","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"关于我"}],["$","$L6",null,{"href":"/resume","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"简历"}]]}]]}],["$","div",null,{"className":"space-y-3","children":[["$","h4",null,{"className":"text-sm font-semibold","children":"技术栈"}],["$","div",null,{"className":"space-y-2","children":[["$","p",null,{"className":"text-sm text-muted-foreground","children":"React / Vue"}],["$","p",null,{"className":"text-sm text-muted-foreground","children":"Next.js / Nuxt"}],["$","p",null,{"className":"text-sm text-muted-foreground","children":"AI / LangChain"}],["$","p",null,{"className":"text-sm text-muted-foreground","children":"Milvus / RAG"}]]}]]}],["$","div",null,{"className":"space-y-3","children":[["$","h4",null,{"className":"text-sm font-semibold","children":"联系方式"}],["$","div",null,{"className":"space-y-2","children":[["$","$L6",null,{"href":"https://github.com/corgii-123","target":"_blank","rel":"noopener noreferrer","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"GitHub"}],["$","$L6",null,{"href":"https://x.com/Corgii_123","target":"_blank","rel":"noopener noreferrer","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"X (Twitter)"}],["$","$L6",null,{"href":"mailto:corgii123mail@gmail.com","className":"block text-sm text-muted-foreground transition-colors hover:text-foreground","children":"Email"}]]}]]}]]}],["$","$L7",null,{"className":"my-8"}],["$","div",null,{"className":"flex flex-col items-center justify-between md:flex-row","children":[["$","p",null,{"className":"text-sm text-muted-foreground","children":"© 2024 石杰洋. All rights reserved."}],["$","div",null,{"className":"mt-4 flex items-center space-x-4 md:mt-0","children":["$","$L6",null,{"href":"/api/rss","className":"text-sm text-muted-foreground transition-colors hover:text-foreground","children":"RSS"}]}]]}]]}]}]]}]}]}]],null],null],["$L8",null]]]]
9:"$Sreact.suspense"
2:["$","div",null,{"className":"container mx-auto max-w-4xl px-4 py-8","children":[["$","nav",null,{"aria-label":"breadcrumb","className":"mb-8","children":["$","ol",null,{"className":"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5","children":[["$","li",null,{"className":"inline-flex items-center gap-1.5","children":["$","a",null,{"className":"transition-colors hover:text-foreground","href":"/","children":"首页"}]}],["$","li",null,{"role":"presentation","aria-hidden":"true","className":"[&>svg]:w-3.5 [&>svg]:h-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li",null,{"className":"inline-flex items-center gap-1.5","children":["$","a",null,{"className":"transition-colors hover:text-foreground","href":"/blog","children":"博客"}]}],["$","li",null,{"role":"presentation","aria-hidden":"true","className":"[&>svg]:w-3.5 [&>svg]:h-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li",null,{"className":"inline-flex items-center gap-1.5","children":["$","span",null,{"role":"link","aria-disabled":"true","aria-current":"page","className":"font-normal text-foreground","children":"基于向量相似度的团队代码审查系统"}]}]]}]}],["$","article",null,{"children":[["$","header",null,{"className":"mb-8","children":[["$","div",null,{"className":"mb-4 flex items-center gap-x-4 text-sm text-muted-foreground","children":[["$","time",null,{"children":"2025-03"}],["$","div",null,{"className":"flex flex-wrap gap-2","children":[["$","span","代码审查",{"className":"rounded-full bg-slate-100 px-2.5 py-0.5 text-xs tracking-wide dark:bg-slate-700","children":"代码审查"}],["$","span","向量数据库",{"className":"rounded-full bg-slate-100 px-2.5 py-0.5 text-xs tracking-wide dark:bg-slate-700","children":"向量数据库"}],["$","span","LangChain",{"className":"rounded-full bg-slate-100 px-2.5 py-0.5 text-xs tracking-wide dark:bg-slate-700","children":"LangChain"}],["$","span","ChromaDB",{"className":"rounded-full bg-slate-100 px-2.5 py-0.5 text-xs tracking-wide dark:bg-slate-700","children":"ChromaDB"}],["$","span","AI",{"className":"rounded-full bg-slate-100 px-2.5 py-0.5 text-xs tracking-wide dark:bg-slate-700","children":"AI"}]]}]]}],["$","h1",null,{"className":"mb-6 text-3xl font-bold tracking-tight sm:text-4xl","children":"基于向量相似度的团队代码审查系统"}],["$","p",null,{"className":"text-xl leading-8 text-muted-foreground","children":"基于向量相似度匹配团队历史代码，结合 AI 技术实现智能代码审查，提升代码质量和团队协作效率"}]]}],["$","$L7",null,{"className":"my-8"}],["$","div",null,{"className":"prose prose-lg prose-neutral max-w-none dark:prose-invert","children":["$","$9",null,{"fallback":["$","div",null,{"children":"加载中..."}],"children":"$La"}]}],["$","$L7",null,{"className":"my-12"}],["$","div",null,{"className":"flex items-center justify-between","children":[["$","$L6",null,{"href":"/blog","className":"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 inline-flex items-center","children":[["$","svg",null,{"className":"mr-2 h-4 w-4","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M15 19l-7-7 7-7"}]}],"返回博客列表"]}],["$","div",null,{"className":"flex gap-2","children":[["$","$L6",null,{"href":"https://x.com/Corgii_123","target":"_blank","rel":"noopener noreferrer","children":"分享到 X","className":"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-8 rounded-md px-3 text-xs"}],["$","$L6",null,{"href":"mailto:corgii123mail@gmail.com","children":"讨论文章","className":"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-8 rounded-md px-3 text-xs"}]]}]]}]]}]]}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"基于向量相似度的团队代码审查系统 | 石杰洋"}],["$","meta","3",{"name":"description","content":"基于向量相似度匹配团队历史代码，结合 AI 技术实现智能代码审查，提升代码质量和团队协作效率"}],["$","link","4",{"rel":"author","href":"https://github.com/corgii-123"}],["$","meta","5",{"name":"author","content":"石杰洋"}],["$","meta","6",{"name":"keywords","content":"前端开发,AI开发,知识库,React,Vue,Next.js,Milvus,LangChain"}],["$","meta","7",{"name":"creator","content":"石杰洋"}],["$","meta","8",{"property":"og:title","content":"石杰洋 · AI-First Front-End Developer"}],["$","meta","9",{"property":"og:description","content":"AI-First Front-End Developer，专注知识库 / DevEx。拥有 3 年教育 SaaS + AI 平台前端经验。"}],["$","meta","10",{"property":"og:url","content":"https://corgii-123.github.io/my_page/"}],["$","meta","11",{"property":"og:site_name","content":"石杰洋的个人网站"}],["$","meta","12",{"property":"og:locale","content":"zh_CN"}],["$","meta","13",{"property":"og:type","content":"website"}],["$","meta","14",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","15",{"name":"twitter:creator","content":"@Corgii_123"}],["$","meta","16",{"name":"twitter:title","content":"石杰洋 · AI-First Front-End Developer"}],["$","meta","17",{"name":"twitter:description","content":"AI-First Front-End Developer，专注知识库 / DevEx"}]]
1:null
b:I[92178,["8371","static/chunks/eb9a1ad1-e355142169896897.js","5326","static/chunks/5326-ac5dceec6c75ae26.js","7473","static/chunks/7473-94691a425c8c77e8.js","6924","static/chunks/6924-2c2e159cc29f0549.js","308","static/chunks/app/blog/%5Bslug%5D/page-4c4f04b3023ccd8b.js"],"MermaidDiagram"]
c:T7b7,flowchart TB
    %% 标题
    title["Gitlab CR 插件"]

    %% 应用层
    subgraph 应用层["应用层"]
        direction LR

        subgraph langchain["大语言模型模块 (基于 LangChain 框架)"]
            llm[LLMs 大模型] --- docs[Documents 知识库] --- prompts[Prompts 提示词] --- vectors[Vectors 向量匹配]
        end

        gitlab_api[Gitlab API] --- vectordb[ChromaDB]
        embed_api[嵌入向量 API] --- config_api[配置中心 API]
    end

    %% 接口层
    subgraph 接口层["接口层"]
        webhook_svc[Gitlab Webhook 服务] --- embed_svc[嵌入服务] --- db_svc[向量数据库服务]
    end

    %% 服务层
    subgraph 服务层["服务层"]
        subgraph analyzer["代码分析模块"]
            parser[代码解析器]
            repo_sync[代码库同步]
        end

        subgraph vector_proc["向量处理"]
            embedding[Embedding]
            similarity[相似度检索]
        end

        subgraph data_store["数据存储"]
            prisma_db[Prisma DB]
            chroma_db[ChromaDB]
        end
    end

    %% 基建层
    subgraph 基建层["基建层"]
        subgraph ai_foundation["AI 模型与服务"]
            embedding_model[嵌入模型]
            review_model[审查模型]
        end

        subgraph storage["存储服务"]
            chrome[ChromaDB]
            postgres[PostgreSQL]
            cache[Redis缓存]
        end
    end

    %% 连接各层
    title --> 应用层 --> 接口层 --> 服务层 --> 基建层

    %% 样式设置
    classDef application fill:#e6e6fa,stroke:#9370db,stroke-width:1px
    classDef interface fill:#fff2cc,stroke:#d6b656,stroke-width:1px
    classDef service fill:#e1d5e7,stroke:#9673a6,stroke-width:1px
    classDef infra fill:#dae8fc,stroke:#6c8ebf,stroke-width:1px

    class 应用层 application
    class 接口层 interface
    class 服务层 service
    class 基建层 infra
    class title application
a:[["$","h2",null,{"children":"一、项目背景与意义"}],"\n",["$","p",null,{"children":"随着团队规模的扩大和代码库的不断积累，保持代码质量和风格一致性变得越来越具有挑战性。开发人员在编写新代码时，需要遵循团队既有的编码规范和最佳实践，但由于团队成员背景和经验的差异，这一目标往往难以实现。"}],"\n",["$","p",null,{"children":"本项目旨在构建一个智能代码审查系统，通过向量化团队已有代码并结合人工智能技术，为新提交的代码提供具有针对性的审查意见，帮助团队成员更好地理解并遵循团队编码标准，提高代码质量，降低维护成本。"}],"\n",["$","h2",null,{"children":"二、系统架构概述"}],"\n",["$","h3",null,{"children":"2.1 分层架构"}],"\n",["$","pre",null,{"children":["$","$Lb",null,{"chart":"$c"}]}],"\n",["$","h3",null,{"children":"2.2 系统流程图"}],"\n",["$","pre",null,{"children":["$","$Lb",null,{"chart":"graph TD\n    A[代码向量化引擎] -->|解析并向量化| B[团队代码库]\n    B -->|建立向量索引| C[ChromaDB向量数据库]\n    D[GitLab Webhook] -->|触发| E[代码审查流程]\n    E -->|获取Diff| F[代码变更]\n    F -->|向量化| G[新代码向量]\n    G -->|检索相似代码| C\n    C -->|获取最相似代码| H[相似代码参考集]\n    H -->|提供团队标准参考| I[AI评审引擎]\n    G -->|提供新代码| I\n    I -->|生成评审报告| J[评审结果]\n    J -->|存储| K[Prisma数据库]\n    J -->|展示| L[Web界面]\n"}]}],"\n",["$","p",null,{"children":"系统主要由三大模块组成："}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"代码向量化引擎"}],"：解析并向量化团队已有的代码库"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"相似度检索模块"}],"：为新提交的代码找到团队库中最相似的代码"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"AI 审查引擎"}],"：结合相似代码，提供具有针对性的代码审查意见"]}],"\n"]}],"\n",["$","h2",null,{"children":"三、核心技术流程"}],"\n",["$","h3",null,{"children":"3.1 代码库向量化"}],"\n",["$","pre",null,{"children":["$","$Lb",null,{"chart":"flowchart TD\n    A[代码库] -->|扫描文件| B[代码文件集合]\n    B -->|按语言分类| C{选择解析器}\n    C -->|JavaScript| D1[JS解析器]\n    C -->|TypeScript| D2[TS解析器]\n    C -->|Python| D3[Python解析器]\n    C -->|Java| D4[Java解析器]\n    C -->|Go| D5[Go解析器]\n\n    D1 & D2 & D3 & D4 & D5 -->|解析AST| E[抽象语法树]\n    E -->|提取代码元素| F[代码元素集合]\n\n    F -->|添加上下文信息| G[代码与上下文描述]\n    G -->|API请求| H[Embedding服务]\n    H -->|获取向量| I[代码向量表示]\n\n    I -->|向量+元数据| J[ChromaDB]\n    F -->|元数据| J\n\n    subgraph 代码元素\n    K1[函数]\n    K2[类]\n    K3[方法]\n    K4[接口]\n    K5[文件]\n    end\n\n    F -.-> 代码元素\n"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"代码解析与提取"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"支持多种语言（JavaScript、TypeScript、Python、Java、Go 等）"}],"\n",["$","li",null,{"children":"使用 Tree-sitter 解析器将代码转换为抽象语法树(AST)"}],"\n",["$","li",null,{"children":"提取函数、类、方法等代码元素"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"向量生成"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"为每个代码元素构建包含上下文的描述文本"}],"\n",["$","li",null,{"children":"通过嵌入 API 获取代码的向量表示"}],"\n",["$","li",null,{"children":"处理速率限制和错误重试"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"向量存储"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"使用 ChromaDB 作为向量数据库"}],"\n",["$","li",null,{"children":"为每个项目维护单独的代码向量集合"}],"\n",["$","li",null,{"children":"保存代码元素的元数据（文件路径、代码类型、行号等）"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h3",null,{"children":"3.2 代码审查流程"}],"\n",["$","pre",null,{"children":["$","$Lb",null,{"chart":"sequenceDiagram\n    actor 开发者\n    participant GitLab\n    participant 审查系统\n    participant 向量数据库\n    participant AI服务\n    participant Web界面\n\n    开发者->>GitLab: 提交代码\n    GitLab->>审查系统: 触发Webhook\n    审查系统->>GitLab: 获取Commit/MR信息\n    GitLab-->>审查系统: 返回Diff内容\n\n    审查系统->>审查系统: 分割Diff为代码块\n    审查系统->>审查系统: 为代码块生成向量\n\n    loop 对每个代码块\n        审查系统->>向量数据库: 检索余弦相似代码\n        向量数据库-->>审查系统: 返回向量库的标准代码\n        审查系统->>审查系统: 添加到标准代码集合\n    end\n\n    审查系统->>审查系统: 按令牌限制分组代码块\n\n    loop 对每个分组\n        审查系统->>AI服务: 发送代码+参考代码+提示词\n        AI服务-->>审查系统: 返回评审结果\n        审查系统->>审查系统: 收集评审结果\n    end\n\n    审查系统->>审查系统: 合并所有评审结果\n    审查系统->>GitLab: 发布评审评论\n    审查系统->>Web界面: 更新评审结果\n    Web界面-->>开发者: 展示详细评审报告\n"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"GitLab Webhook 触发"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"开发者提交代码后，GitLab 自动触发 webhook"}],"\n",["$","li",null,{"children":"系统获取 commit 的 diff 信息"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"代码切片与向量化"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"将 diff 内容分割为有意义的代码块"}],"\n",["$","li",null,{"children":"为每个代码块生成向量表示"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"相似代码检索"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"在向量数据库中查询与新代码最相似的已有代码"}],"\n",["$","li",null,{"children":"提取相似代码作为参考标准"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"分组与令牌计算"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"将代码块分组以控制 AI 请求的令牌数"}],"\n",["$","li",null,{"children":"确保每组内容不超过模型上下文限制"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"AI 评审与意见整合"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"发送代码和相似参考代码给 AI 进行评审"}],"\n",["$","li",null,{"children":"按评审维度生成评分和建议"}],"\n",["$","li",null,{"children":"合并多组评审结果，生成完整报告"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"结果存储与展示"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"将评审结果保存到 Prisma 数据库"}],"\n",["$","li",null,{"children":"通过 Web 界面展示评审结果"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h2",null,{"children":"四、系统优势与特色"}],"\n",["$","h3",null,{"children":"4.1 基于向量相似度的团队标准参考"}],"\n",["$","p",null,{"children":"与传统代码规范文档不同，本系统直接从团队现有代码中学习，提供与当前代码最相关的参考示例。这种方式有以下优势："}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"更具针对性"}],"：根据具体代码提供相似的最佳实践示例"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"自动更新"}],"：随着团队代码的迭代，审查标准自然演进"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"降低学习成本"}],"：开发者可以直观地看到团队编码风格"]}],"\n"]}],"\n",["$","h3",null,{"children":"4.2 多维度评分机制"}],"\n",["$","p",null,{"children":"系统从多个维度对代码进行评审："}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"代码质量"}],"：整体结构和组织"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"可读性"}],"：清晰度和易理解性"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"性能"}],"：运行效率和资源利用"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"安全性"}],"：潜在漏洞和安全隐患"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"可维护性"}],"：扩展性和未来可修改性"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"一致性"}],"：与团队现有代码风格的符合度"]}],"\n"]}],"\n",["$","h3",null,{"children":"4.3 智能分组与令牌管理"}],"\n",["$","p",null,{"children":"系统会根据代码量和复杂度，自动将代码分组并控制 AI 请求中的令牌数，确保："}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"不超出 AI 模型的上下文限制"}],"\n",["$","li",null,{"children":"优化 API 调用成本"}],"\n",["$","li",null,{"children":"保持审查质量和完整性"}],"\n"]}],"\n",["$","h2",null,{"children":"五、实施与部署"}],"\n",["$","h3",null,{"children":"5.1 环境要求"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Node.js 环境"}],"\n",["$","li",null,{"children":"ChromaDB 向量数据库"}],"\n",["$","li",null,{"children":"PostgreSQL 关系型数据库（或 SQLite）"}],"\n",["$","li",null,{"children":"GitLab 实例（用于 Webhook）"}],"\n"]}],"\n",["$","h3",null,{"children":"5.2 快速开始"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"启动 ChromaDB 服务"}],"\n",["$","pre",null,{"children":["$","pre",null,{"className":"language-bash","children":["$","code",null,{"children":"npm run chroma:start\n"}]}]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"同步本地代码库"}],"\n",["$","pre",null,{"children":["$","pre",null,{"className":"language-bash","children":["$","code",null,{"children":"npm run vector:sync-local <项目ID> [代码库路径]\n"}]}]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"配置 GitLab Webhook"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"URL: /api/webhook/gitlab"}],"\n",["$","li",null,{"children":"事件: Push events, Merge request events"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"启动 Web 应用"}],"\n",["$","pre",null,{"children":["$","pre",null,{"className":"language-bash","children":["$","code",null,{"children":"npm run dev\n"}]}]}],"\n"]}],"\n"]}],"\n",["$","h2",null,{"children":"六、未来展望"}],"\n",["$","h3",null,{"children":"6.1 性能优化"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"实现增量同步，只处理变更的代码文件"}],"\n",["$","li",null,{"children":"优化向量检索算法，提高相似度匹配精度"}],"\n",["$","li",null,{"children":"使用缓存减少重复计算和 API 调用"}],"\n"]}],"\n",["$","h3",null,{"children":"6.2 功能扩展"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"支持更多编程语言和框架"}],"\n",["$","li",null,{"children":"集成到 IDE 插件，提供实时编码建议"}],"\n",["$","li",null,{"children":"引入团队自定义规则和评分标准"}],"\n",["$","li",null,{"children":"添加历史审查数据分析，生成团队编码质量报告"}],"\n"]}],"\n",["$","h3",null,{"children":"6.3 协作增强"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"支持多人审查协作"}],"\n",["$","li",null,{"children":"与项目管理工具集成，跟踪代码质量改进"}],"\n",["$","li",null,{"children":"建立团队代码知识库，沉淀编码最佳实践"}],"\n"]}],"\n",["$","h2",null,{"children":"七、结论"}],"\n",["$","p",null,{"children":"基于向量相似度的团队代码审查系统通过结合现代 AI 技术和团队已有代码库，提供了一种智能化、自适应的代码审查解决方案。该系统不仅能帮助开发人员更好地理解和遵循团队编码标准，还能持续积累和沉淀团队的技术知识，为代码质量保障和团队协作提供强有力的支持。"}],"\n",["$","p",null,{"children":"通过向量化团队代码并利用相似度检索技术，系统能够为每一段新提交的代码找到最相关的团队标准参考，使代码审查不再依赖于静态的规范文档，而是动态地适应团队编码实践的演进。这一特性使得系统特别适合快速迭代的开发团队，能够在保持灵活性的同时确保代码质量和一致性。"}],"\n",["$","hr",null,{}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["🚀 ",["$","strong",null,{"children":"项目特色"}],": 这是一个创新性的 AI 代码审查解决方案，通过向量相似度匹配技术，实现了基于团队历史代码的智能审查，为代码质量保障提供了全新的思路和实践方法。"]}],"\n"]}]]
